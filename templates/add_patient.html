<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Add Patient</title>

<link rel="stylesheet" href="../static/css/bootstrap.css">
<link rel="stylesheet" href="../static/vendors/fontawesome/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body{
    background:linear-gradient(135deg,#e8f0ff,#f7fbff);
    font-family:"Segoe UI", sans-serif;
    margin:0;
}

/* NAVBAR */
.navbar{
    background:linear-gradient(90deg,#0f2c64,#1f6ed5);
    box-shadow:0 5px 20px rgba(0,0,0,.2);
}
.navbar-brand{
    color:white!important;
    font-weight:700;
}
.navbar-nav{margin:auto;}
.navbar .nav-link{
    color:white!important;
    font-weight:600;
    margin:0 14px;
    padding:6px 48px;
    border-radius:8px;
    background:linear-gradient(135deg,#2e86de,#48dbfb);
    transition:.4s;
    box-shadow:0 5px 12px rgba(0,0,0,.2);
}
.navbar .nav-link:hover{
    background:linear-gradient(135deg,#48dbfb,#2e86de);
    transform:translateY(-3px);
}

/* HERO */
.hero-banner{
    background:linear-gradient(rgba(50,100,220,.85),rgba(120,200,255,.85)),url('../static/img/hero.jpg');
    background-size:cover;
    color:white;
    padding:70px 0;
}

/* LAYOUT */
.dashboard-wrapper{
    display:flex;
}

/* SIDEBAR */
.sidebar{
    width:260px;
    min-height:100vh;
    background:linear-gradient(180deg,#0f2c64,#1f6ed5);
    padding:25px 15px;
    box-shadow:4px 0 20px rgba(0,0,0,.25);
    position:relative;
}
.sidebar::before{
    content:"";
    position:absolute;
    top:0;left:0;
    width:6px;height:100%;
    background:linear-gradient(#48dbfb,#2e86de);
}
.sidebar a{
    display:flex;
    align-items:center;
    gap:12px;
    padding:15px 18px;
    margin-bottom:16px;
    border-radius:12px;
    color:white;
    text-decoration:none;
    background:rgba(255,255,255,.1);
    transition:.4s;
}
.sidebar a:hover,
.sidebar a.active{
    background:linear-gradient(135deg,#48dbfb,#2e86de);
    transform:translateX(8px);
    box-shadow:0 0 15px rgba(72,219,251,.9);
}

/* MAIN */
.main-content{
    padding:35px;
    flex:1;
}

/* FORM CARD */
.form-card{
    background:white;
    padding:30px;
    border-radius:20px;
    box-shadow:0 10px 25px rgba(0,0,0,.15);
}
label{font-weight:600;}

/* FOOTER */
.footer-area{
    background:linear-gradient(90deg,#0f2c64,#1f6ed5);
    color:white;
    padding:40px 0;
    margin-top:40px;
}
</style>

<script>
function calculateAge(dob){
    var birthDate = new Date(dob);
    var today = new Date();
    var age = today.getFullYear() - birthDate.getFullYear();
    var m = today.getMonth() - birthDate.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) age--;
    return age;
}

function validate(){
if(document.form1.name.value==""){alert("Enter Name");return false;}
if(document.form1.dob.value==""){alert("Enter DOB");return false;}

var age = calculateAge(document.form1.dob.value);
if(age < 1){ alert("Patient must be at least 1 year old"); return false; }

if(document.form1.address.value==""){alert("Enter Address");return false;}
if(document.form1.city.value==""){alert("Enter City");return false;}
if(document.form1.mobile.value==""||isNaN(document.form1.mobile.value)||document.form1.mobile.value.length!=10){
alert("Invalid Mobile");return false;}
if(document.form1.email.value==""){alert("Enter Email");return false;}
if(document.form1.aadhar.value==""){alert("Enter Aadhar");return false;}
if(document.form1.guardian.value==""){alert("Enter Guardian");return false;}
if(document.form1.mobile2.value==""||isNaN(document.form1.mobile2.value)||document.form1.mobile2.value.length!=10){
alert("Invalid Guardian Mobile");return false;}
if(document.form1.blood_grp.selectedIndex==0){alert("Select Blood Group");return false;}
return true;
}
</script>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg">
<div class="container">
<a class="navbar-brand" href="#">üè• ORGAN</a>
<div class="collapse navbar-collapse">
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="/hos_home">Home</a></li>
<li class="nav-item"><a class="nav-link" href="/hos_donor">Donor</a></li>
<li class="nav-item"><a class="nav-link" href="/logout">Logout</a></li>
</ul>
</div>
</div>
</nav>

<!-- HERO -->
<section class="hero-banner text-center">
<div class="container">
<h1>Add Patient</h1>
<p>Register New Patient</p>
</div>
</section>

<!-- DASHBOARD -->
<div class="dashboard-wrapper">

<!-- SIDEBAR -->
<div class="sidebar">
<a href="/hos_pat" class="active"><i class="fas fa-user-injured"></i> Patients</a>
<a href="/hos_donor"><i class="fas fa-hand-holding-medical"></i> Donors</a>
<a href="/hos_req"><i class="fas fa-notes-medical"></i> Organ Required</a>
<a href="/hos_trans"><i class="fas fa-procedures"></i> Transplant</a>
</div>

<!-- MAIN -->
<div class="main-content">

<h3 class="mb-4">Patient Registration Form</h3>

{% if msg=="success" %}
<div class="alert alert-success">Patient Registered Successfully!</div>
<iframe src="http://iotcloud.co.in/testmail/testmail1.php?message={{mess}}&email={{email}}&subject=Patient" width="1" height="1"></iframe>
<iframe src="http://iotcloud.co.in/organ_chain/add_block.php?bc={{bc}}&data={{bdata}}" width="1" height="1"></iframe>
<script>
setTimeout(()=>{window.location='/hos_pat';},3000);
</script>
{% endif %}

{% if msg=="fail" %}
<script>alert("Aadhar already exists");</script>
{% endif %}

<div class="form-card">
<form name="form1" method="post" onsubmit="return validate()">

<div class="row">

<div class="col-md-6">
<label>Patient Name</label>
<input class="form-control" name="name">
</div>

<div class="col-md-6">
<label>Gender</label>
<select class="form-control" name="gender">
<option>Male</option>
<option>Female</option>
</select>
</div>

<div class="col-md-6">
<label>DOB</label>
<input type="date" class="form-control" name="dob">
</div>

<div class="col-md-6">
<label>Address</label>
<input class="form-control" name="address">
</div>

<div class="col-md-6">
<label>City</label>
<input class="form-control" name="city">
</div>

<div class="col-md-6">
<label>Mobile</label>
<input class="form-control" name="mobile" maxlength="10">
</div>

<div class="col-md-6">
<label>Email</label>
<input class="form-control" name="email">
</div>

<div class="col-md-6">
<label>Aadhar</label>
<input class="form-control" name="aadhar" maxlength="12">
</div>

<div class="col-md-6">
<label>Guardian Name</label>
<input class="form-control" name="guardian">
</div>

<div class="col-md-6">
<label>Guardian Mobile</label>
<input class="form-control" name="mobile2" maxlength="10">
</div>

<div class="col-md-6">
<label>Blood Group</label>
<select class="form-control" name="blood_grp">
<option value="">Select</option>
<option>A+ve</option><option>A1+ve</option><option>A-ve</option>
<option>B+ve</option><option>B-ve</option>
<option>AB+ve</option><option>AB-ve</option>
<option>O+ve</option><option>O-ve</option>
</select>
</div>

</div>

<div class="text-center mt-4">
<button class="btn btn-primary px-5">Register Patient</button>
</div>

</form>
</div>

</div>
</div>

<!-- FOOTER -->
<footer class="footer-area text-center">
<div class="container">
<p>Organ Donation System ¬© 2026</p>
<p>Tamilnadu, India | organ@info.com</p>
</div>
</footer>

<script src="../static/js/jquery-2.2.4.min.js"></script>
<script src="../static/js/bootstrap.min.js"></script>
</body>
</html>
