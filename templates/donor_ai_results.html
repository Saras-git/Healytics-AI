<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AI Patient Match</title>

<link rel="stylesheet" href="../static/css/bootstrap.css">
<link rel="stylesheet" href="../static/vendors/fontawesome/css/all.min.css">

<style>
body{background:linear-gradient(135deg,#e8f0ff,#f7fbff); font-family:"Segoe UI",sans-serif; margin:0;}
.navbar{background:linear-gradient(90deg,#0f2c64,#1f6ed5); box-shadow:0 5px 20px rgba(0,0,0,.2);}
.navbar-brand{color:white!important;font-weight:700;}
.navbar-nav{margin:auto;}
.navbar .nav-link{color:white!important; font-weight:600; margin:0 14px; padding:6px 48px; border-radius:8px; background:linear-gradient(135deg,#2e86de,#48dbfb); transition:.4s;}
.hero-banner{background:linear-gradient(rgba(50,100,220,.85),rgba(120,200,255,.85)),url('../static/img/hero.jpg'); background-size:cover; color:white; padding:60px 0;}
.dashboard-wrapper{display:flex;width:100%;}
.sidebar{width:260px; min-height:100vh; background:linear-gradient(180deg,#0f2c64,#1f6ed5); padding:25px 15px;}
.sidebar a{display:flex; gap:12px; padding:14px 18px; margin-bottom:16px; border-radius:12px; color:white; text-decoration:none; background:rgba(255,255,255,.1); transition:.3s;}
.sidebar a:hover{background:linear-gradient(135deg,#48dbfb,#2e86de); transform:translateX(6px);}
.sidebar a.active{background:linear-gradient(135deg,#48dbfb,#2e86de); transform:translateX(8px); box-shadow:0 0 15px rgba(72,219,251,.9);}
.main-content{padding:35px; flex:1;}
.match-card{background:white; border-radius:20px; padding:25px; box-shadow:0 12px 30px rgba(0,0,0,.15); transition:.4s;}
.match-card:hover{transform:translateY(-6px); box-shadow:0 25px 45px rgba(0,0,0,.3);}
.match-card h5{font-weight:700; color:#0f2c64;}
.match-card p{margin:6px 0;font-size:14px;}
.rank-badge{display:inline-block; padding:6px 12px; border-radius:20px; color:white; font-weight:600; margin-right:6px;}
.high{background-color:#28a745;}    /* Green */
.medium{background-color:#ffc107;}  /* Yellow */
.low{background-color:#dc3545;}     /* Red */
.rank-number{font-weight:700; font-size:16px; color:#0f2c64; margin-right:6px;}
.card-btn{display:inline-block; margin-top:12px; padding:8px 22px; border-radius:25px; font-weight:600; text-decoration:none; color:white; background:linear-gradient(135deg,#0f2c64,#1f6ed5); transition:.3s;}
.card-btn:hover{background:linear-gradient(135deg,#1f6ed5,#0f2c64); transform:scale(1.05); color:white;}
.footer-area{background:linear-gradient(90deg,#0f2c64,#1f6ed5); color:white; padding:35px 0; margin-top:40px;}
</style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg">
<div class="container">
<a class="navbar-brand" href="#">üè• ORGAN</a>
<div class="collapse navbar-collapse">
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="/hos_home">Home</a></li>
<li class="nav-item"><a class="nav-link" href="/hos_donor">Donor</a></li>
<li class="nav-item"><a class="nav-link" href="/logout">Logout</a></li>
</ul>
</div>
</div>
</nav>

<!-- HERO -->
<section class="hero-banner text-center">
<div class="container">
<h1>AI Patient Match Results</h1>
<p>Donor: {{ donor.name }} (ID: {{ donor.donor_id }})</p>
</div>
</section>

<div class="dashboard-wrapper">

<!-- SIDEBAR -->
<div class="sidebar">
<a href="/hos_pat"><i class="fas fa-user-injured"></i> Patients</a>
<a href="/hos_donor" class="active"><i class="fas fa-hand-holding-medical"></i> Donors</a>
<a href="/hos_req"><i class="fas fa-notes-medical"></i> Organ Required</a>
<a href="/hos_trans"><i class="fas fa-procedures"></i> Transplant</a>
</div>

<!-- MAIN -->
<div class="main-content">

<h3 class="mb-4">Matched Patients for this Donor {{ donor.donor_id }}</h3>

{% if results|length == 0 %}
<div class="alert alert-warning text-center">
<i class="fas fa-exclamation-triangle"></i> No matching patients found.
</div>
{% else %}
<div class="row">
{% for p in results %}
<div class="col-md-6 mb-4">
  <div class="match-card">
    <div class="d-flex align-items-center mb-2">
      <span class="rank-number">#{{ loop.index }}</span>
      <span class="rank-badge 
        {% if p.ai_score > 80 %}high{% elif p.ai_score > 50 %}medium{% else %}low{% endif %}">
        {{ p.ai_score }}%
      </span>
    </div>
    <h5>üë§ {{ p.name }} (Patient ID: {{ p.patient_id }})</h5>
    <p><b>Organ Needed:</b> {{ p.organ }}</p>
    <p><b>Age:</b> {{ p.age }}</p>
    <p><b>Blood Group:</b> {{ p.blood }}</p>
    <p><b>Urgency:</b> {{ p.urgency }}</p>
    <p><b>Confidence:</b> {{ p.confidence }}</p>
    <p><b>Compatibility Score:</b> {{ p.ai_score }}%</p>
    <hr style="background:#0f2c64">
    <a href="{{ url_for('confirm_patient', rid=p.req_id, donor_id=donor.donor_id) }}" class="card-btn">
      ‚úî Confirm Patient
    </a>
  </div>
</div>
{% endfor %}
</div>
{% endif %}

<div class="text-center mt-4">
<a href="/hos_donor" class="btn btn-outline-primary">‚¨Ö Back to Donors</a>
</div>

</div>
</div>

<!-- FOOTER -->
<footer class="footer-area text-center">
<div class="container">
<p>Organ Donation System ¬© 2026</p>
<p>Tamilnadu, India | organ@info.com</p>
</div>
</footer>

<script src="../static/js/jquery-2.2.4.min.js"></script>
<script src="../static/js/bootstrap.min.js"></script>

</body>
</html>
